@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

/* =========================
   Theme Tokens (single source)
   ========================= */
:root {
  /* Background (supports overrides) */
  --bg: var(--bg-override-light, #f6f7f9);

  /* Text */
  --fg: #0f172a;
  --muted: rgba(15, 23, 42, 0.62);

  /* Surfaces */
  --card: rgba(255, 255, 255, 0.82);
  --border: rgba(15, 23, 42, 0.1);

  /* Primary (theme-first) */
  --btn: #0f172a;
  --btn-fg: #ffffff;

  /* Accent (USER-CONTROLLED, OFF BY DEFAULT) */
  --accent: transparent;
  --accent-soft: transparent;
  --accent-ring: transparent;

  /* ===== Glass tokens (light) ===== */
  --glass-bg: rgba(15, 23, 42, 0.055);
  --glass-bg-strong: rgba(15, 23, 42, 0.095);
  --glass-border: rgba(15, 23, 42, 0.14);
  --glass-highlight: rgba(255, 255, 255, 0.6);
  --glass-inner: rgba(2, 6, 23, 0.05);
  --glass-shadow: 0 8px 20px rgba(2, 6, 23, 0.045);

  /* Pills */
  --pill-bg: rgba(15, 23, 42, 0.06);
  --pill-border: rgba(15, 23, 42, 0.14);
  --pill-text: rgba(15, 23, 42, 0.78);

  /* Focus */
  --ring: rgba(15, 23, 42, 0.25);
  --ring-offset: rgba(246, 247, 249, 0.92);

  --press-shadow: 0 10px 26px rgba(2, 6, 23, 0.14);

  /* Segmented control base */
  --seg-surface: color-mix(in srgb, var(--fg) 4%, transparent);
  --seg-border: color-mix(in srgb, var(--fg) 10%, transparent);

  /* Selected (LIGHT MODE = dark chip) */
  --seg-selected-bg: var(--btn);
  --seg-selected-fg: var(--btn-fg);

    /* Toggle track */
  --toggle-track-off: color-mix(in srgb, var(--fg) 10%, transparent);
  --toggle-track-border: color-mix(in srgb, var(--fg) 12%, transparent);

  /* Toggle ON (LIGHT MODE = dark track) */
  --toggle-track-on: var(--btn);

  /* Thumb */
  --toggle-thumb-off: color-mix(in srgb, var(--fg) 10%, transparent);
  --toggle-thumb-on: var(--btn-fg);

  color-scheme: light;
}

.dark {
  --bg: var(--bg-override-dark, #000000);

  --fg: rgba(255, 255, 255, 0.92);
  --muted: rgba(255, 255, 255, 0.62);

  --card: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.1);

  --btn: #ffffff;
  --btn-fg: #000000;

  /* Accent still off unless user sets it */
  --accent: transparent;
  --accent-soft: transparent;
  --accent-ring: transparent;

  --glass-bg: rgba(255, 255, 255, 0.055);
  --glass-bg-strong: rgba(255, 255, 255, 0.1);
  --glass-border: rgba(255, 255, 255, 0.14);
  --glass-highlight: rgba(255, 255, 255, 0.18);
  --glass-inner: rgba(0, 0, 0, 0.45);
  --glass-shadow: 0 18px 60px rgba(0, 0, 0, 0.72);

  --pill-bg: rgba(255, 255, 255, 0.1);
  --pill-border: rgba(255, 255, 255, 0.22);
  --pill-text: rgba(255, 255, 255, 0.86);

  --ring: rgba(255, 255, 255, 0.28);
  --ring-offset: rgba(0, 0, 0, 0.9);

  --press-shadow: 0 12px 34px rgba(0, 0, 0, 0.65);

  /* Segmented control base */
  --seg-surface: rgba(255, 255, 255, 0.06);
  --seg-border: rgba(255, 255, 255, 0.12);

  /* Selected (DARK MODE = light chip) */
  --seg-selected-bg: var(--btn);
  --seg-selected-fg: var(--btn-fg);

    --toggle-track-off: rgba(255, 255, 255, 0.10);
  --toggle-track-border: rgba(255, 255, 255, 0.12);

  /* Toggle ON (DARK MODE = light track) */
  --toggle-track-on: var(--btn);

  --toggle-thumb-off: rgba(255, 255, 255, 0.14);
  --toggle-thumb-on: var(--btn-fg);
  
  color-scheme: dark;
}

/* -------------------------
   Base layout
   ------------------------- */
.pt-safe { padding-top: env(safe-area-inset-top); }

html, body { height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* Background vibe */
:root body {
  background:
    radial-gradient(1200px 700px at 50% -260px, rgba(15, 23, 42, 0.035), transparent 62%),
    radial-gradient(900px 520px at 12% 12%, rgba(2, 132, 199, 0.055), transparent 58%),
    radial-gradient(900px 520px at 88% 18%, rgba(16, 185, 129, 0.045), transparent 58%),
    var(--bg);
}
.dark body {
  background:
    radial-gradient(900px 500px at 50% -220px, rgba(255, 255, 255, 0.055), transparent 62%),
    radial-gradient(900px 520px at 15% 10%, rgba(255, 255, 255, 0.028), transparent 58%),
    var(--bg);
}

/* Accent ON */
:root[data-accent="on"] {
  --accent: #3b82f6;
  --accent-soft: color-mix(in srgb, var(--accent) 18%, transparent);
  --accent-ring: color-mix(in srgb, var(--accent) 45%, transparent);
}

/* IMPORTANT: target :root when it's also .dark */
:root.dark[data-accent="on"] {
  --accent-soft: color-mix(in srgb, var(--accent) 28%, transparent);
  --accent-ring: color-mix(in srgb, var(--accent) 55%, transparent);
}

/* Optional: only apply accent hover when accent is enabled */
:root[data-accent="on"] .btn-accent:hover {
  background: color-mix(in srgb, var(--accent-soft) 100%, transparent);
}

/* =========================
   Glass utilities
   ========================= */
.glass {
  background-color: var(--glass-bg);
  background-clip: padding-box;
  border: 1px solid var(--glass-border);
  -webkit-backdrop-filter: blur(16px) saturate(155%) contrast(110%);
  backdrop-filter: blur(16px) saturate(155%) contrast(110%);
  box-shadow:
    inset 0 1px 0 var(--glass-highlight),
    inset 0 -1px 0 var(--glass-inner),
    var(--glass-shadow);
}
.glass-strong { background-color: var(--glass-bg-strong); }

/* Focus ring (theme-first) */
.glass-focus:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring-offset),
    0 0 0 4px var(--ring),
    inset 0 1px 0 var(--glass-highlight),
    inset 0 -1px 0 var(--glass-inner),
    var(--glass-shadow);
}

/* =========================
   Buttons: theme-first (accent optional)
   ========================= */
.btn {
  position: relative;
  border-radius: 16px;
  padding: 12px 16px;

  font-size: 14px;
  font-weight: 850;
  letter-spacing: -0.01em;
  user-select: none;

  border: 1px solid var(--border);
  color: var(--fg);
  background: transparent;
  box-shadow: none;

  transition:
    transform 120ms ease,
    background-color 160ms ease,
    border-color 160ms ease,
    color 160ms ease,
    box-shadow 160ms ease,
    filter 160ms ease;
}

.btn:hover { filter: brightness(1.01); }
.btn:active { transform: scale(0.985); }
.btn:disabled { opacity: 0.45; pointer-events: none; filter: saturate(0.7); }

/* Primary = pure theme */
.btn-primary {
  background: var(--btn);
  color: var(--btn-fg);
  border-color: var(--btn);
  box-shadow: 0 8px 18px rgba(2, 6, 23, 0.10);
}
.dark .btn-primary { box-shadow: 0 10px 26px rgba(0, 0, 0, 0.55); }

.btn-primary:hover { filter: brightness(1.03); }
.btn-primary:active { box-shadow: 0 6px 14px rgba(2, 6, 23, 0.12); }

/* Ghost = neutral */
.btn-ghost {
  background: color-mix(in srgb, var(--fg) 5%, transparent);
  border-color: color-mix(in srgb, var(--fg) 10%, transparent);
  color: var(--fg);
}
.dark .btn-ghost {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.12);
}

/* Focus ring = theme-first (NOT accent) */
.btn:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring-offset),
    0 0 0 4px var(--ring);
}

/* Optional accent helpers (only show if user sets --accent-ring/soft) */
.btn-accent {
  border-color: var(--accent-ring);
  box-shadow: 0 0 0 2px var(--accent-ring);
}
.btn-accent:hover {
  background: color-mix(in srgb, var(--accent-soft) 100%, transparent);
}

/* =========================
   Home typography helpers (MOVED OUT of @media)
   ========================= */
.sr-eyebrow {
  font-size: 12px;
  font-weight: 650;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--muted);
}

.sr-title {
  font-size: 26px;
  line-height: 1.15;
  font-weight: 900;
  letter-spacing: -0.02em;
  color: var(--fg);
}

.sr-subtitle {
  font-size: 14px;
  line-height: 1.6;
  color: var(--muted);
}

.sr-section-title {
  font-size: 14px;
  font-weight: 850;
  letter-spacing: -0.01em;
  color: var(--fg);
}

.sr-label {
  font-size: 12px;
  font-weight: 650;
  color: var(--muted);
}

.sr-meta {
  font-size: 12px;
  font-weight: 650;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  color: var(--muted);
}

.sr-chip {
  font-size: 12px;
  font-weight: 650;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--muted);
  padding: 0;
  border: none;
  background: transparent;
}

/* =========================
   Portrait-only guard fallback
   ========================= */
@media (orientation: landscape) and (max-height: 500px) {
  body { overflow: hidden; touch-action: none; }
  body::before {
    content: "Rotate back to portrait";
    position: fixed;
    inset: 0;
    display: grid;
    place-items: center;
    padding: 24px;
    text-align: center;
    z-index: 2147483647;
    color: white;
    font-size: 16px;
    font-weight: 800;
    background: rgba(0, 0, 0, 0.92);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
  body::after {
    content: "This app is designed for portrait use.";
    position: fixed;
    left: 0;
    right: 0;
    top: 55%;
    padding: 0 24px;
    text-align: center;
    font-size: 13px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
    z-index: 2147483647;
  }
}